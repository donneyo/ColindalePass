const sidebarToggle = document.querySelector("#sidebar-toggle");
sidebarToggle.addEventListener("click", function () {
    document.querySelector("#sidebar").classList.toggle("collapsed");
});

document.querySelector(".theme-toggle").addEventListener("click", () => {
    toggleLocalStorage();
    toggleRootClass();
});

function toggleRootClass() {
    const current = document.documentElement.getAttribute('data-bs-theme');
    const inverted = current == 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-bs-theme', inverted);
}

function toggleLocalStorage() {
    if (isLight()) {
        localStorage.removeItem("light");
    } else {
        localStorage.setItem("light", "set");
    }
}

function isLight() {
    return localStorage.getItem("light");
}

if (isLight()) {
    toggleRootClass();
}



function showExpiredDialog() {
    var modal = new bootstrap.Modal(document.getElementById('validModal'));
    $("#validModal .modal-title").text("Expired Code");
    $("#validModal .modal-body p").text("Expired Code. Please contact your Sender");
    modal.show();
}

function showInvalidDialog() {
    var modal = new bootstrap.Modal(document.getElementById('validModal'));
    $("#validModal .modal-title").text("Invalid Code");
    $("#validModal .modal-body p").text("Please contact your Sender");
    modal.show();
}

function showValidDialog(username) {
    var modal = new bootstrap.Modal(document.getElementById('validModal'));
    $("#validModal .modal-title").text("Valid Code");
    $("#validModal .modal-body p").text("Welcome to Colindale Estate, Please proceed to the reception for security checkup.");
    $("#validModal .modal-footer p").text("Code generated by: The " + username + "!");
    modal.show();
}

function showErrorModal(message) {
    showModalDialog("Error", message);
}

function showModalDialog(title, message) {
    console.log("Title: " + title + "\nMessage: " + message);
}

$(document).ready(function () {
    $("#sidebar-toggle").click(function () {
        $(".hideable-filter").toggle();
    });
});

$(document).ready(function() {
    var tab = new bootstrap.Tab(document.getElementById('mailServerTab'));
    tab.show(); // Show the default tab on page load

    var settingTab = new bootstrap.Tab(document.getElementById('settingTab'));
    settingTab.show(); // Show the tab container on page load
});


$(document).ready(function () {
    $(".link-delete").on("click", function (e) {
        e.preventDefault();
        var deleteUrl = $(this).attr("href");
        showDeleteConfirmModal(deleteUrl);
    });

    $("#yesButton").on("click", function () {
        var deleteUrl = $(this).attr("href");
        window.location = deleteUrl;
    });

    $("#confirmModal").on("hidden.bs.modal", function () {
        $("#yesButton").off("click"); // Remove the click event handler
    });
});

function showDeleteConfirmModal(deleteUrl) {
    $("#confirmText").text("Are you sure you want to delete this user?");
    $("#yesButton").attr("href", deleteUrl);
    $("#confirmModal").modal("show");
}

$(document).ready(function() {
	$("#logoutLink").on("click", function(e) {
		e.preventDefault();
		document.logoutForm.submit();
	});
});

